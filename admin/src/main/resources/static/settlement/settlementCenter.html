<meta title="结算中心"/>
<div class="p">
	<div class="row">
		<div class="col-sm-6">
			<div class="panel panel-orange">
				<div class="panel-heading">
					<span class="h3">日结算</span>
				</div>
				<div class="panel-body">
					<form class="form-inline" s="form,valid" s-form="{done: submitDone}" action="/api/settlement/generate-store-user-daily-settlement-sheet-detail"
						  method="post">
						<table class="table table-bordered table-stripped">
							<tr>
								<th style="width: 150px;">门店</th>
								<td>
									<div s="tpl" id="storeUser" class="p-xs" s-data="">
										<div s-valid-role="item" s-valid-label="门店" style="display: inline-block">
											<span>{%=this.name%} {%=this.phone%}</span>
											<input type="hidden" name="storeUserId" value="{%=this.id%}"
												   s-valid-error="require()"/>
										</div>
									</div>
									<input type="button" class="btn btn-primary btn-xs" s-click="selectStoreUser($storeUser)"
										   value="选择门店"/>
								</td>
							</tr>
							<tr>
								<th style="width: 150px;">日期</th>
								<td s="tpl" s-data="">
									<input type="text" class="form-control" autocomplete="off" name="date" s-valid-error="require()"
										   s="datetimepicker"/>
								</td>
							</tr>
							<tr>
								<th></th>
								<td>
									<input type="submit" class="btn btn-primary" value="结算"/>
								</td>
							</tr>
						</table>
					</form>
				</div>
			</div>
		</div>
		<div class="col-sm-6">
			<div class="panel panel-orange">
				<div class="panel-heading">
					<span class="h3">周结算</span>
				</div>
				<div class="panel-body">
					<form class="form-inline" s="form,valid" s-form="{done: submitDone}" action="/api/settlement/generate-week-settlement-sheet"
						  method="post">
						<table class="table table-bordered table-stripped">
							<tr>
								<th style="width: 150px;">门店</th>
								<td>
									<div s="tpl" id="weekStoreUser" class="p-xs" s-data="">
										<div s-valid-role="item" s-valid-label="门店" style="display: inline-block">
											<span>{%=this.name%} {%=this.phone%}</span>
											<input type="hidden" name="storeUserId" value="{%=this.id%}"
												   s-valid-error="require()"/>
										</div>
									</div>
									<input type="button" class="btn btn-primary btn-xs" s-click="selectStoreUser($weekStoreUser)"
										   value="选择门店"/>
								</td>
							</tr>
							<tr>
								<th style="width: 150px;">日期</th>
								<td s="tpl" s-data="">
									<input type="text" class="form-control" autocomplete="off" name="date" s-valid-error="require()"
										   s="datetimepicker"/>
								</td>
							</tr>
							<tr>
								<th></th>
								<td>
									<input type="submit" class="btn btn-primary" value="结算"/>
								</td>
							</tr>
						</table>
					</form>
				</div>
			</div>
		</div>
	</div>
</div>
<script>
	function selectStoreUser($this) {
		S.popupOpen('/storeUser/storeUserSelector.html', {multi: false}).done(function (storeUserList) {
			if (storeUserList) {
				$this.data(storeUserList[0])
			}
		})
	}

	function submitDone() {
		S.toast('结算完成')
	}
</script>