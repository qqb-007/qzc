<meta title="自定SKU" args="id,food:_model_,foodId,specialSkuIdList,eleSkuId" model="S.get('/api/store-user-food/' + id)" width="1000"/>
<style>
</style>
<div class="p">
	<form class="form-inline" id="form"
				s="form,valid" method="put" action="/api/store-user-food/special-sku/{id}">
		<table id="foodsGrid" s='nda'
					 class="table table-striped table-middle table-bordered form-inline">
			<caption>美团自定义SKU</caption>
			<tr>
				<th>选择</th>
				<th>SkuId</th>
				<th>规格名</th>
				<th class="text-right">售价倍数</th>
				<th class="text-right">报价倍数</th>
				<th class="text-center">重量(g)</th>
				<th class="text-center">库存</th>
				<th class="text-center">不发布</th>
				<th class="text-right">排序</th>
			</tr>
			<tbody s="loop" s-data="food.skuList" id="skuList">
			<tr s-loop-role="empty">
				<td colspan="7" class="alert alert-warning">
					暂无SKU
				</td>
			</tr>
			<tr s-loop-role="row" s="datac" class="sku-tr">
				<td s="tpl">
					{%if(specialSkuIdList.indexOf(this.skuId) == -1) {%}
					<input type="checkbox" name="specialSkuIdList" value="{%=this.skuId%}" />
					{%} else {%}
					<input type="checkbox" checked="checked" name="specialSkuIdList" value="{%=this.skuId%}" />
					{%}%}

				</td>
				<td>
					<input type="text" readonly class="form-control " style="width: 100%" placeholder="sku id" s s-data-filter="'skuId'" name="skuId" s-valid-error="require()"/>
				</td>
				<td>
					<input type="text" class="form-control" readonly style="width: 100%" placeholder="规格名" s s-data-filter="'spec'" s-valid-error="require()"/>
				</td>
				<td class="text-right">
					<input type="number" class="form-control text-right" readonly style="width: 100%" placeholder="售价倍数"
								 s s-data-filter="'priceRatio'" s-valid-error="require()"/>
				</td>
				<td class="text-right">
					<input type="number" class="form-control text-right" readonly style="width: 100%" placeholder="报价倍数"
								 s s-data-filter="'quoteUnitRatio'" s-valid-error="require()"/>
				</td>
				<td class="text-right">
					<input type="number" class="form-control text-right" readonly style="width: 100%" placeholder="重量"
								 s s-data-filter="'weight'" s-valid-error="require()"/>
				</td>
				<td class="text-right">
					<input type="number" class="form-control text-right" style="width: 100%" placeholder="库存"
						   s s-data-filter="'stock'" name="stock" s-valid-error="require()"/>
				</td>
				<td class="text-right">
					<select class="form-control" s s-data-filter="'ignore'" disabled name="ignoreList">
						<option value="false">发布</option>
						<option value="true">不发布</option>
					</select>
				</td>
				<td>
					<i class="fa fa-arrows"></i>
				</td>
			</tr>
			</tbody>
		</table>
		<table s='nda'
					 class="table table-striped table-middle table-bordered form-inline">
			<caption>饿百/客户端自定义sku</caption>
			<tr>
				<th>选择</th>
				<th>SkuId</th>
				<th>规格名</th>
				<th class="text-right">售价倍数</th>
				<th class="text-right">报价倍数</th>
				<th class="text-center">重量(g)</th>
				<th class="text-center">不发布</th>
				<th class="text-right">排序</th>
			</tr>
			<tbody s="loop" s-data="food.skuList">
			<tr s-loop-role="empty">
				<td colspan="7" class="alert alert-warning">
					暂无SKU
				</td>
			</tr>
			<!--<tr s-loop-role="row" s="datac" class="sku-tr">-->
				<!--<td s="tpl">-->
					<!--{%if(eleSkuId !== this.skuId) {%}-->
					<!--<label class="s-radio">-->
						<!--<input type="radio" name="eleSkuId" class="radio-{%=this.skuId%}" value="{%=this.skuId%}" />-->
						<!--<span class="s-radio-indicator"></span>-->
					<!--</label>-->
					<!--{%} else {%}-->
					<!--<label class="s-radio">-->
						<!--<input type="radio" checked="checked" name="eleSkuId" class="radio-{%=this.skuId%}"  value="{%=this.skuId%}" />-->
						<!--<span class="s-radio-indicator"></span>-->
					<!--</label>-->
					<!--{%}%}-->

				<!--</td>-->
				<!--<td>-->
					<!--<input type="text" readonly class="form-control " style="width: 100%" placeholder="sku id" s s-data-filter="'skuId'" s-valid-error="require()"/>-->
				<!--</td>-->
				<!--<td>-->
					<!--<input type="text" class="form-control" readonly style="width: 100%" placeholder="规格名" s s-data-filter="'spec'" s-valid-error="require()"/>-->
				<!--</td>-->
				<!--<td class="text-right">-->
					<!--<input type="number" class="form-control text-right" readonly style="width: 100%" placeholder="售价倍数"-->
								 <!--s s-data-filter="'priceRatio'" s-valid-error="require()"/>-->
				<!--</td>-->
				<!--<td class="text-right">-->
					<!--<input type="number" class="form-control text-right" readonly style="width: 100%" placeholder="报价倍数"-->
								 <!--s s-data-filter="'quoteUnitRatio'" s-valid-error="require()"/>-->
				<!--</td>-->
				<!--<td class="text-right">-->
					<!--<input type="number" class="form-control text-right" readonly style="width: 100%" placeholder="重量"-->
								 <!--s s-data-filter="'weight'" s-valid-error="require()"/>-->
				<!--</td>-->
				<!--<td class="text-right">-->
					<!--<select class="form-control" s s-data-filter="'ignore'" disabled name="ignoreList">-->
						<!--<option value="false">发布</option>-->
						<!--<option value="true">不发布</option>-->
					<!--</select>-->
				<!--</td>-->
				<!--<td>-->
					<!--<i class="fa fa-arrows"></i>-->
				<!--</td>-->
			<!--</tr>-->
			</tbody>
		</table>
	</form>
</div>
<script>
	specialSkuIdList = specialSkuIdList || []
	console.info(eleSkuId)
	S.meta.btns = [
		{
			name: "确定",
			style: "btn btn-primary",
			click: function () {
				return $form.submit().done(function (rs) {
					S.toast('保存成功', 'success')
					S.close(true)
				})
			}
		},
		{
			name: "关闭",
			style: "btn btn-default",
			click: function () {
				S.close();
			}
		}
	]

	S.on('s-ready', function () {
		$skuList.node.sortable({
			handle: ".fa-arrows"
		})
		S.node.find('.radio-' + eleSkuId).prop('checked', true)
	})

</script>
