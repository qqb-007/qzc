<meta title="新建采购单" width="650px"/>
<form role="form" id="storeUserForm" s="valid,form"
      class="form-horizontal"
      method="post"
      style="padding: 20px;" action="/api/back/warehouse/createPurchaseOrder">
    <div class="form-group" s-valid-role="item">
        <label class="col-sm-2 control-label">选择门店：</label>
        <div s="tpl" id="storeUserList" style="display: inline-block">
            <div style="display: inline-block" class="store-info"  id="storeName" value="{%=this.name%}"  name="storeName">
                {%=this.name%} <a href="javascript:;" s-click="this.node.parent().remove()"
                                  class="fa fa-times"></a>
                <input type="hidden" name="storeId" data-name="{%=this.name%}" class="store-user-id"
                       value="{%=this.id%}"/>
                <input type="hidden" name="store" data-name="{%=this.name%}" class="store-user-id"
                       value="{%=this.name%}"/>
            </div>
        </div>
        <input type="button" class="btn btn-xs btn-outline btn-success" value="选择门店"
               s-click="selectStoreUser()"/>
    </div>

    <div class="form-group" s-valid-role="item">
        <label class="col-sm-2 control-label">商品种类数量：</label>
        <div class="col-sm-10">
            <input autocomplete="off" type="text" name="goodsTypeNum" class="form-control" placeholder="请输入有多少种类的商品"
            >
        </div>
    </div>

    <div class="form-group" s-valid-role="item">
        <label class="col-sm-2 control-label">采购总数量：</label>
        <div class="col-sm-10">
            <input class="form-control" rows="3" name="procurementNum "/>
        </div>
    </div>

    <div class="form-group" s-valid-role="item">
        <label class="col-sm-2 control-label">采购总金额：</label>
        <div class="col-sm-10">
            <input class="form-control" rows="3" name="procurementPrice"  "/>
        </div>
    </div>


</form>
<script type="text/javascript">


    S.on('s-ready', function(){

    })
    function selectStoreUser() {
        S.popupOpen('/storeUser/storeUserSelector.html', {multi: false}).done(function (storeUserList) {
            if (storeUserList) {
                $storeUserList.data(storeUserList[0])
            }
        })
    }
    S.meta.btns = [
        {
            name: "保存",
            style: "btn btn-primary",
            click: function () {
                if (S.node.find('.store-user-id').val()) {
                    return S.S("#storeUserForm").submit().done(function (rs) {
                        S.alert("添加成功")
                        S.close(true);
                        S.S("#storeUserForm").refresh();

                    });

                }else {
                    S.alert('请选择要绑定的店铺');
                    return
                }

            }
        },
        {
            name: "关闭",
            style: "btn btn-default",
            click: function () {
                S.close();
            }
        }
    ]
</script>
