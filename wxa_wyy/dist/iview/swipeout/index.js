"use strict";function swipeDirection(t,e,a,i){return Math.abs(t-e)>=Math.abs(a-i)?t-e>0?"Left":"Right":a-i>0?"Up":"Down"}Component({externalClasses:["i-class"],properties:{actions:{value:[],type:Array,observer:"_updateButtonSize"},unclosable:{value:!1,type:Boolean},toggle:{value:!1,type:Boolean,observer:"closeButtonGroup"},operateWidth:{type:Number,value:160}},options:{multipleSlots:!0},data:{tStart:{pageX:0,pageY:0},limitMove:0,position:{pageX:0,pageY:0}},methods:{loop:function(){},_updateButtonSize:function(){var t=this.data.actions;if(t.length>0){var e=(wx.createSelectorQuery().in(this),0);t.forEach(function(t){e+=t.width||0}),this.data.limitMove=e}else this.data.limitMove=this.data.operateWidth},handlerTouchstart:function(t){var e=t.touches?t.touches[0]:{},a=this.data.tStart;if(e)for(var i in a)e[i]&&(a[i]=e[i])},swipper:function(t){var e=this.data,a=e.tStart,i={pageX:t.pageX-a.pageX,pageY:t.pageY-a.pageY};e.limitMove<Math.abs(i.pageX)&&(i.pageX=-e.limitMove),this.setData({position:i})},handlerTouchmove:function(t){var e=this.data.tStart,a=t.touches?t.touches[0]:{};if(a){"Left"===swipeDirection(e.pageX,a.pageX,e.pageY,a.pageY)&&this.swipper(a)}},handlerTouchend:function(t){var e=this.data.tStart,a=t.changedTouches?t.changedTouches[0]:{};if(a){var i=swipeDirection(e.pageX,a.pageX,e.pageY,a.pageY),o={pageX:a.pageX-e.pageX,pageY:a.pageY-e.pageY};Math.abs(o.pageX)>=40&&"Left"===i?o.pageX=o.pageX<0?-this.data.limitMove:this.data.limitMove:o.pageX=0,this.setData({position:o})}},handlerButton:function(t){this.data.unclosable||this.closeButtonGroup();var e=t.currentTarget.dataset;this.triggerEvent("change",{index:e.index})},closeButtonGroup:function(){this.setData({position:{pageX:0,pageY:0}})},handlerParentButton:function(t){this.data.unclosable||this.closeButtonGroup()}},ready:function(){this._updateButtonSize()}});